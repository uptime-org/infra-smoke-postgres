# {{SERVICE_NAME}}

{{DESCRIPTION}}

**Generated by GX Genesis | Team: {{TEAM}} | Tier: {{TIER}} | Workload: {{TIER}}**

## 🏗️ **Infrastructure Service**

This is an infrastructure-level service providing foundational capabilities for the Galaxy ecosystem.

## 🚀 **Quick Start**

### **Development**
```bash
# Build the infrastructure service
docker build -t {{SERVICE_NAME}} .

# Run locally with data persistence
docker run -d \
  --name {{SERVICE_NAME}} \
  -p 8545:8545 \
  -v {{SERVICE_NAME}}_data:/app/data \
  {{SERVICE_NAME}}
```

### **Production Deployment**
```bash
# Deploy with Helm
helm install {{SERVICE_NAME}} ./helm

# Deploy to specific environment
helm install {{SERVICE_NAME}} ./helm -f helm/env/prod.values.yaml
```

## 📊 **Service Configuration**

### **DNS Domains**
This service is configured with the following domains:
{{#DNS_DOMAINS}}
- `{{.}}.environment.galaxy.com`
{{/DNS_DOMAINS}}

### **Ports**
- **API Port**: 8545 (Infrastructure services)
- **Health Check**: `/health` endpoint
- **Metrics**: `/metrics` endpoint (if enabled)

### **Persistent Storage**
- **Data Directory**: `/app/data`
- **Storage Size**: 20Gi (configurable)
- **Access Mode**: ReadWriteOnce

## 🛠️ **Infrastructure Features**

- **🔒 Security**: Non-root user (`infrauser`)
- **💾 Persistence**: Automatic data volume mounting
- **📈 Monitoring**: Extended health check intervals for infrastructure workloads
- **⚖️ Resources**: Higher memory/CPU allocations for infrastructure needs
- **🏷️ Anti-Affinity**: Spread replicas across different nodes for resilience

## ⚙️ **Configuration**

### **Environment Variables**
- `SERVICE_NAME`: {{SERVICE_NAME}}
- `SERVICE_TIER`: {{TIER}}
- `SERVICE_TEAM`: {{TEAM}}
- `INFRASTRUCTURE_MODE`: enabled

### **Helm Values**
Base configuration is in `helm/values.yaml`. Environment-specific overrides:

- `helm/env/local.values.yaml` - Local development
- `helm/env/dev.values.yaml` - Development environment
- `helm/env/stage.values.yaml` - Staging environment  
- `helm/env/prod.values.yaml` - Production environment

## 🔧 **Development**

### **Local Setup**
```bash
# Install dependencies
pip install -r src/requirements.txt

# Run in development mode
python src/app.py --infrastructure-mode --debug

# Run tests
pytest tests/
```

### **Docker Commands**
```bash
# Build
docker build -t {{SERVICE_NAME}} .

# Run with volume persistence
docker run -v $(pwd)/data:/app/data -p 8545:8545 {{SERVICE_NAME}}

# Check health
curl http://localhost:8545/health
```

## 🚨 **Health Monitoring**

### **Health Check**
- **Endpoint**: `GET /health`
- **Interval**: 60 seconds
- **Timeout**: 30 seconds
- **Start Period**: 30 seconds
- **Retries**: 5

### **Readiness Check**
- **Endpoint**: `GET /ready`
- **Interval**: 10 seconds
- **Timeout**: 5 seconds

## 📋 **Requirements**

- **CPU**: 500m (request) / 2000m (limit)
- **Memory**: 512Mi (request) / 2Gi (limit)
- **Storage**: 20Gi persistent volume
- **Network**: Access to required external services

## 🔄 **Deployment Pipeline**

This service uses GitHub Actions for CI/CD:

1. **Code Push** → Triggers build
2. **Docker Build** → Creates container image
3. **Security Scan** → Scans for vulnerabilities
4. **Deploy to Dev** → Automatic deployment to dev environment
5. **Deploy to Prod** → Manual approval for production

## 📈 **Monitoring & Alerts**

### **Key Metrics**
- Service availability
- Resource utilization (CPU/Memory)
- Disk usage for persistent storage
- Response time for health checks

### **Alerting**
- Health check failures
- Resource exhaustion
- Storage capacity warnings

## 🤝 **Team Ownership**

- **Team**: {{TEAM}}
- **On-Call**: Check team rotation
- **Escalation**: Team lead for critical issues

## 📄 **License**

MIT License - use it however you want!

---

**🌌 Infrastructure service for the Galaxy ecosystem - providing reliable foundational services.**